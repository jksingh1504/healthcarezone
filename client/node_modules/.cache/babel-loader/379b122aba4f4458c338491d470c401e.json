{"ast":null,"code":"var _jsxFileName = \"/home/jyoti-kamal/Desktop/All_Projects/healthcarezone_codebase/client/src/markup/pages/verify-otp.jsx\";\nimport React, { Component } from \"react\";\nimport axios from \"../../utilities/api.js\";\nimport url from \"../../utilities/global.env.js\"; // Layout\n\nimport Header from \"../layout/header\";\nimport Footer from \"../layout/footer\"; // Import Images\n\nimport bnrImg1 from \"../../images/banner/img1.jpg\";\nimport waveBlue from \"../../images/shap/wave-blue.png\";\nimport circleDots from \"../../images/shap/circle-dots.png\";\nimport plusBlue from \"../../images/shap/plus-blue.png\";\nimport \"../../stylesheets/verify-otp.css\";\nimport Toast from \"../elements/toast.jsx\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass Booking extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleOTP = () => {\n      const otp = this.state.otp.join(\"\");\n\n      if (otp.length !== 6 || isNaN(otp)) {\n        this.setState(prevState => ({\n          toastMessage: \"Please Enter valid OTP\",\n          showToast: true,\n          toastVariant: \"danger\"\n        }));\n        setTimeout(() => {\n          this.setState(prevState => ({\n            showToast: false\n          }));\n        }, 3000);\n        return;\n      }\n\n      localStorage.setItem(\"healthcareZoneOTP\", otp);\n      this.setState(prevState => ({\n        showPasswordComponent: true\n      })); // axios.post(\"/user/register\",body)\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      const data = e.target.elements;\n      const body = {};\n\n      for (let i = 0; i < data.length - 1; i++) {\n        body[data[i].name] = data[i].value; // data[i].value = \"\";\n      }\n\n      if (body.password !== body.confirmPassword) {\n        this.setState(prevState => ({\n          toastMessage: \"Password and confirm password field did not match!\",\n          showToast: true,\n          toastVariant: \"danger\"\n        }));\n        setTimeout(() => {\n          window.location.href = `${url.baseURL}`;\n        }, 4000);\n        return;\n      }\n\n      delete body.confirmPassword;\n      body.otp = localStorage.getItem(\"healthcareZoneOTP\");\n      axios.post(\"/user/auth/register\", body).then(res => {\n        const {\n          token,\n          newUser\n        } = res.data;\n        localStorage.setItem(\"healthcareZoneToken\", token);\n        localStorage.setItem(\"healthcareZoneUserDetails\", JSON.stringify(newUser));\n        this.setState(prevState => ({\n          toastMessage: \"Your sign-up request has been successful now you can access our servieces, Thank you!\",\n          showToast: true,\n          toastVariant: \"success\"\n        }));\n        setTimeout(() => {\n          window.location.href = `${url.baseURL}`;\n        }, 4000);\n      }).catch(err => {\n        this.setState(prevState => ({\n          toastMessage: err.response.data.message === \"Incorrect or Expired otp!\" ? \"Your request has been timed-out please try signing-up again\" : err.response.data.message,\n          showToast: true,\n          toastVariant: \"danger\"\n        }));\n        setTimeout(() => {\n          if (err.response.data.message === \"Incorrect or Expired otp!\") {\n            window.location.href = `${url.baseURL}/sign-up`;\n          }\n\n          this.setState(prevState => ({\n            showToast: false\n          }));\n        }, 3000);\n      });\n    };\n\n    function handleChange(e, ele, indx, state) {\n      const otpInputs = document.getElementsByClassName(\"otpInput\");\n\n      if (indx < 5 && !isNaN(e.key)) {\n        e.target.value = e.key;\n        otpInputs[indx + 1].focus();\n        state.otp[indx] = e.target.value;\n      } else if (e.key === \"Backspace\" && indx > 0) {\n        otpInputs[indx - 1].focus();\n        state.otp[indx] = e.target.value;\n      } else if (isNaN(e.key)) {\n        e.target.value = \"\";\n      } else {\n        state.otp[indx] = e.target.value;\n      }\n    }\n\n    this.state = {\n      inputRef: new Array(6).fill(null).map((ele, indx) => /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"otpInput\",\n        maxLength: 1,\n        onKeyUp: e => handleChange(e, ele, indx, this.state),\n        type: \"text\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 11\n      }, void 0)),\n      otp: [],\n      showPasswordComponent: false,\n      toastMessage: \"\",\n      showToast: false,\n      toastVariant: \"\"\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Toast, {\n        variant: this.state.toastVariant,\n        showToast: this.state.showToast,\n        message: this.state.toastMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"page-content bg-white\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"banner-wraper\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"page-banner\",\n            style: {\n              backgroundImage: \"url(\" + bnrImg1 + \")\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"section\", {\n              className: \"section-area section-sp2 appointment-wraper\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"container\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row justify-content-center\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-xl-5 col-lg-6 col-md-6\",\n                    children: this.state.showPasswordComponent ? /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"appointment-form form-wraper\",\n                      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                        className: \"title\",\n                        children: \"Setup your password\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 169,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n                        onSubmit: this.handleSubmit,\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"form-group\",\n                          children: /*#__PURE__*/_jsxDEV(\"input\", {\n                            type: \"password\",\n                            name: \"password\",\n                            required: true,\n                            className: \"form-control\",\n                            placeholder: \"Please enter a password\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 172,\n                            columnNumber: 31\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 171,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"form-group\",\n                          children: /*#__PURE__*/_jsxDEV(\"input\", {\n                            type: \"password\",\n                            name: \"confirmPassword\",\n                            required: true,\n                            className: \"form-control\",\n                            placeholder: \"Please confirm your password\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 181,\n                            columnNumber: 31\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 180,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                          type: \"submit\",\n                          className: \"btn btn-secondary btn-lg\",\n                          children: \"Submit\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 189,\n                          columnNumber: 29\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 170,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 168,\n                      columnNumber: 25\n                    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"appointment-form form-wraper\",\n                      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                        className: \"title\",\n                        children: \"OTP Verification\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 199,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"otp-container\",\n                        children: this.state.inputRef\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 200,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 203,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        onClick: this.handleOTP,\n                        className: \"btn btn-secondary btn-lg\",\n                        children: \"Submit\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 204,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 198,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 166,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 165,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 164,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"pt-img1 animate-wave\",\n              src: waveBlue,\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"pt-img2 animate2\",\n              src: circleDots,\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"pt-img3 animate-rotate\",\n              src: plusBlue,\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n\n}\n\nexport default Booking;","map":{"version":3,"sources":["/home/jyoti-kamal/Desktop/All_Projects/healthcarezone_codebase/client/src/markup/pages/verify-otp.jsx"],"names":["React","Component","axios","url","Header","Footer","bnrImg1","waveBlue","circleDots","plusBlue","Toast","Booking","constructor","props","handleOTP","otp","state","join","length","isNaN","setState","prevState","toastMessage","showToast","toastVariant","setTimeout","localStorage","setItem","showPasswordComponent","handleSubmit","e","preventDefault","data","target","elements","body","i","name","value","password","confirmPassword","window","location","href","baseURL","getItem","post","then","res","token","newUser","JSON","stringify","catch","err","response","message","handleChange","ele","indx","otpInputs","document","getElementsByClassName","key","focus","inputRef","Array","fill","map","render","backgroundImage"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"../../utilities/api.js\";\nimport url from \"../../utilities/global.env.js\";\n\n// Layout\nimport Header from \"../layout/header\";\nimport Footer from \"../layout/footer\";\n\n// Import Images\nimport bnrImg1 from \"../../images/banner/img1.jpg\";\nimport waveBlue from \"../../images/shap/wave-blue.png\";\nimport circleDots from \"../../images/shap/circle-dots.png\";\nimport plusBlue from \"../../images/shap/plus-blue.png\";\nimport \"../../stylesheets/verify-otp.css\";\nimport Toast from \"../elements/toast.jsx\";\n\nclass Booking extends Component {\n  constructor(props) {\n    super(props);\n    function handleChange(e, ele, indx, state) {\n      const otpInputs = document.getElementsByClassName(\"otpInput\");\n      if (indx < 5 && !isNaN(e.key)) {\n        e.target.value = e.key;\n        otpInputs[indx + 1].focus();\n        state.otp[indx] = e.target.value;\n      } else if (e.key === \"Backspace\" && indx > 0) {\n        otpInputs[indx - 1].focus();\n        state.otp[indx] = e.target.value;\n      } else if (isNaN(e.key)) {\n        e.target.value = \"\";\n      } else {\n        state.otp[indx] = e.target.value;\n      }\n    }\n    this.state = {\n      inputRef: new Array(6)\n        .fill(null)\n        .map((ele, indx) => (\n          <input\n            className=\"otpInput\"\n            maxLength={1}\n            onKeyUp={(e) => handleChange(e, ele, indx, this.state)}\n            type=\"text\"\n          />\n        )),\n      otp: [],\n      showPasswordComponent: false,\n      toastMessage: \"\",\n      showToast: false,\n      toastVariant: \"\",\n    };\n  }\n  handleOTP = () => {\n    const otp = this.state.otp.join(\"\");\n    if (otp.length !== 6 || isNaN(otp)) {\n      this.setState((prevState) => ({\n        toastMessage: \"Please Enter valid OTP\",\n        showToast: true,\n        toastVariant: \"danger\",\n      }));\n      setTimeout(() => {\n        this.setState((prevState) => ({\n          showToast: false,\n        }));\n      }, 3000);\n      return;\n    }\n    localStorage.setItem(\"healthcareZoneOTP\", otp);\n    this.setState((prevState) => ({\n      showPasswordComponent: true,\n    }));\n    // axios.post(\"/user/register\",body)\n  };\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    const data = e.target.elements;\n    const body = {};\n    for (let i = 0; i < data.length - 1; i++) {\n      body[data[i].name] = data[i].value;\n      // data[i].value = \"\";\n    }\n    if (body.password !== body.confirmPassword) {\n      this.setState((prevState) => ({\n        toastMessage: \"Password and confirm password field did not match!\",\n        showToast: true,\n        toastVariant: \"danger\",\n      }));\n      setTimeout(() => {\n        window.location.href = `${url.baseURL}`;\n      }, 4000);\n      return;\n    }\n    delete body.confirmPassword;\n    body.otp = localStorage.getItem(\"healthcareZoneOTP\");\n    axios\n      .post(\"/user/auth/register\", body)\n      .then((res) => {\n        const { token, newUser } = res.data;\n        localStorage.setItem(\"healthcareZoneToken\", token);\n        localStorage.setItem(\n          \"healthcareZoneUserDetails\",\n          JSON.stringify(newUser)\n        );\n        this.setState((prevState) => ({\n          toastMessage:\n            \"Your sign-up request has been successful now you can access our servieces, Thank you!\",\n          showToast: true,\n          toastVariant: \"success\",\n        }));\n        setTimeout(() => {\n          window.location.href = `${url.baseURL}`;\n        }, 4000);\n      })\n      .catch((err) => {\n        this.setState((prevState) => ({\n          toastMessage:\n            err.response.data.message === \"Incorrect or Expired otp!\"\n              ? \"Your request has been timed-out please try signing-up again\"\n              : err.response.data.message,\n          showToast: true,\n          toastVariant: \"danger\",\n        }));\n        setTimeout(() => {\n          if (err.response.data.message === \"Incorrect or Expired otp!\") {\n            window.location.href = `${url.baseURL}/sign-up`;\n          }\n          this.setState((prevState) => ({\n            showToast: false,\n          }));\n        }, 3000);\n      });\n  };\n\n  render() {\n    return (\n      <>\n        <Header />\n\n        <Toast\n          variant={this.state.toastVariant}\n          showToast={this.state.showToast}\n          message={this.state.toastMessage}\n        />\n\n        <div className=\"page-content bg-white\">\n          <div className=\"banner-wraper\">\n            <div\n              className=\"page-banner\"\n              style={{ backgroundImage: \"url(\" + bnrImg1 + \")\" }}\n            >\n              {/* <div className=\"container\">\n\t\t\t\t\t\t\t\t<div className=\"page-banner-entry text-center\">\n\t\t\t\t\t\t\t\t\t<h1>Booking</h1>\n\t\t\t\t\t\t\t\t\t<nav aria-label=\"breadcrumb\" className=\"breadcrumb-row\">\n\t\t\t\t\t\t\t\t\t\t<ul className=\"breadcrumb\">\n\t\t\t\t\t\t\t\t\t\t\t<li className=\"breadcrumb-item\"><Link to=\"/\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"22\" height=\"22\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" className=\"feather feather-home\"><path d=\"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z\"></path><polyline points=\"9 22 9 12 15 12 15 22\"></polyline></svg> Home</Link></li>\n\t\t\t\t\t\t\t\t\t\t\t<li className=\"breadcrumb-item active\" aria-current=\"page\">Booking</li>\n\t\t\t\t\t\t\t\t\t</ul>\n                            </nav>\n\t\t\t\t\t\t</div>\n\t\t\t </div> */}\n              <section className=\"section-area section-sp2 appointment-wraper\">\n                <div className=\"container\">\n                  <div className=\"row justify-content-center\">\n                    <div className=\"col-xl-5 col-lg-6 col-md-6\">\n                      {this.state.showPasswordComponent ? (\n                        <div className=\"appointment-form form-wraper\">\n                          <h3 className=\"title\">Setup your password</h3>\n                          <form onSubmit={this.handleSubmit}>\n                            <div className=\"form-group\">\n                              <input\n                                type=\"password\"\n                                name=\"password\"\n                                required\n                                className=\"form-control\"\n                                placeholder=\"Please enter a password\"\n                              />\n                            </div>\n                            <div className=\"form-group\">\n                              <input\n                                type=\"password\"\n                                name=\"confirmPassword\"\n                                required\n                                className=\"form-control\"\n                                placeholder=\"Please confirm your password\"\n                              />\n                            </div>\n                            <button\n                              type=\"submit\"\n                              className=\"btn btn-secondary btn-lg\"\n                            >\n                              Submit\n                            </button>\n                          </form>\n                        </div>\n                      ) : (\n                        <div className=\"appointment-form form-wraper\">\n                          <h3 className=\"title\">OTP Verification</h3>\n                          <div className=\"otp-container\">\n                            {this.state.inputRef}\n                          </div>\n                          <br />\n                          <button\n                            onClick={this.handleOTP}\n                            className=\"btn btn-secondary btn-lg\"\n                          >\n                            Submit\n                          </button>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              </section>\n              <img className=\"pt-img1 animate-wave\" src={waveBlue} alt=\"\" />\n              <img className=\"pt-img2 animate2\" src={circleDots} alt=\"\" />\n              <img className=\"pt-img3 animate-rotate\" src={plusBlue} alt=\"\" />\n            </div>\n          </div>\n        </div>\n        <Footer />\n      </>\n    );\n  }\n}\n\nexport default Booking;\n"]},"metadata":{},"sourceType":"module"}